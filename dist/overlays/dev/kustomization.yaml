apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: dev
resources:
  - ../../base
configMapGenerator:
  - name: pubsub-operator-env-vars
    behavior: create
    envs:
      - .env
patches:
  - target:
      group: rbac.authorization.k8s.io
      version: v1
      kind: RoleBinding
    patch: |-
      - op: add
        path: /subjects
        value:
          - kind: User
            name: 891286530011-compute@developer.gserviceaccount.com
  # - target:
  #     group: apps
  #     version: v1
  #     kind: Deployment
  #   patch: |-
  #     - op: add
  #       path: /spec/template/spec/serviceAccount
  #       value: k8s-service-account@sauce-k8s--yak.iam.gserviceaccount.com